const { createClient } = require('@supabase/supabase-js');

const supabase = createClient(
  'https://otittsnvduydvqqzsxsm.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90aXR0c252ZHV5ZHZxcXpzeHNtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Nzc4NjgzNCwiZXhwIjoyMDgzMzYyODM0fQ.Mx_EatSD5ZJbq2xjpr0msuLywWAiNyqmFmwEZjOU6RM'
);

const books = [
  { id: 'book-python', slug: 'python-programming', wikiTitle: 'Python_Programming', title: 'Python Programming', description: 'Learn Python from scratch - the worlds most popular beginner language', category: 'computing', coverImage: 'https://images.unsplash.com/photo-1526379095098-d400fd0bf935?w=800' },
  { id: 'book-human-body', slug: 'human-body', wikiTitle: 'Human_Physiology', title: 'The Human Body', description: 'Explore how your body works - from cells to organs', category: 'science', coverImage: 'https://images.unsplash.com/photo-1559757175-7cb036e0e82a?w=800' },
  { id: 'book-world-history', slug: 'world-history', wikiTitle: 'World_History', title: 'World History', description: 'Journey through human civilization from ancient times', category: 'history', coverImage: 'https://images.unsplash.com/photo-1461360370896-922624d12a74?w=800' },
  { id: 'book-cooking', slug: 'cooking-basics', wikiTitle: 'Cookbook', title: 'Cooking Basics', description: 'Learn essential cooking skills and delicious recipes', category: 'life', coverImage: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800' },
  { id: 'book-astronomy', slug: 'astronomy', wikiTitle: 'Astronomy', title: 'Introduction to Astronomy', description: 'Explore the universe, stars, planets, and galaxies', category: 'science', coverImage: 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800' },
  { id: 'book-economics', slug: 'economics', wikiTitle: 'Economics', title: 'Economics Fundamentals', description: 'Understand money, markets, and how economies work', category: 'history', coverImage: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800' },
  { id: 'book-biology', slug: 'biology', wikiTitle: 'Biology', title: 'Biology Essentials', description: 'Study life, organisms, and ecosystems', category: 'science', coverImage: 'https://images.unsplash.com/photo-1530026405186-ed1f139313f8?w=800' },
  { id: 'book-geography', slug: 'geography', wikiTitle: 'Geography', title: 'World Geography', description: 'Discover continents, climates, and cultures', category: 'history', coverImage: 'https://images.unsplash.com/photo-1524661135-423995f22d0b?w=800' },
  { id: 'book-music', slug: 'music-theory', wikiTitle: 'Music_Theory', title: 'Music Theory', description: 'Learn notes, rhythm, and musical composition', category: 'life', coverImage: 'https://images.unsplash.com/photo-1507838153414-b4b713384a76?w=800' },
  { id: 'book-web-dev', slug: 'web-development', wikiTitle: 'Web_Development', title: 'Web Development', description: 'Build websites with HTML, CSS, and JavaScript', category: 'computing', coverImage: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800' },
  { id: 'book-psychology', slug: 'psychology', wikiTitle: 'Psychology', title: 'Introduction to Psychology', description: 'Understand the human mind and behavior', category: 'science', coverImage: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800' },
  { id: 'book-photography', slug: 'photography', wikiTitle: 'Photography', title: 'Photography Basics', description: 'Master camera settings and composition', category: 'life', coverImage: 'https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=800' },
];

const chapters = [
  // Python chapters
  { id: 'ch-python-1', slug: 'getting-started', wikiTitle: 'Python_Programming/Getting_Started', bookId: 'book-python', title: 'Getting Started with Python', orderIndex: 1,
    content: { A1: 'Python is a computer language. It is easy to learn. You can use Python to make programs.\n\nTo start, you need to install Python. Go to python.org. Click download. Install it on your computer.\n\nAfter you install Python, you can write code. Open IDLE. Type: print("Hello"). Press Enter. You will see "Hello" on the screen. This is your first program!', A2: 'Python is a programming language that many people use. It is popular because it is easy to read and write. Companies like Google, Netflix, and Instagram use Python.\n\nTo begin, visit python.org and download the latest version. The installation is simple - just follow the steps. After installation, open IDLE - this is where you write code.\n\nTry typing: print("Hello, World!") and press Enter. The print() function displays text on screen. Congratulations - you wrote your first program!', B1: 'Python is one of the most popular programming languages in the world. Created by Guido van Rossum in 1991, it is known for its clear syntax and readability. Major companies use Python for web development, data science, and artificial intelligence.\n\nTo get started, download Python from python.org. Once installed, you have several options for writing code: IDLE comes built-in, but many developers prefer VS Code or PyCharm for larger projects.\n\nYour first program uses the print() function: print("Hello, World!"). This outputs text to the console. Python minimal syntax means no class definitions, main functions, or semicolons needed for simple programs.', B2: 'Python has established itself as one of the most versatile programming languages since its creation by Guido van Rossum in 1991. Its design philosophy emphasizes code readability, using significant whitespace (indentation) to define code blocks rather than curly braces.\n\nSetting up your development environment involves downloading Python from python.org or using package managers like Homebrew (Mac) or apt (Linux). For development, options range from the built-in IDLE to sophisticated IDEs like PyCharm or VS Code with extensions.\n\nThe canonical first program - print("Hello, World!") - demonstrates Python minimal syntax. Unlike Java or C++, there is no boilerplate code required. The Python interpreter executes code line by line, making it excellent for learning and rapid prototyping.', C1: 'Python ascendancy in the programming world represents a fascinating case study in language design philosophy. Created by Guido van Rossum during the late 1980s as a successor to the ABC language, Python incorporated ABC strengths while addressing its limitations. The language name, incidentally, pays homage to Monty Python Flying Circus.\n\nEstablishing a robust development environment requires consideration of several factors: virtual environments (venv or virtualenv) for dependency isolation, version management tools like pyenv for handling multiple Python versions, and appropriate IDE selection based on project requirements.\n\nThe canonical first program - print("Hello, World!") - embodies Python philosophy articulated in PEP 20 (The Zen of Python): "Simple is better than complex." This minimalist approach, combined with the extensive standard library ("batteries included"), has made Python the language of choice for domains ranging from web development to machine learning.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What is Python?', options: ['A snake', 'A computer language', 'A game'], correct: 1 }, { type: 'true_false', question: 'Python is hard to learn.', answer: false }] }, A2: { questions: [{ type: 'fill_blank', question: 'Python comes with a program called ___.', answer: 'IDLE' }, { type: 'multiple_choice', question: 'Which company uses Python?', options: ['Only small companies', 'Google and Netflix', 'No companies'], correct: 1 }] }, B1: { questions: [{ type: 'multiple_choice', question: 'When was Python created?', options: ['1981', '1991', '2001'], correct: 1 }, { type: 'fill_blank', question: 'Python was created by Guido van ___.', answer: 'Rossum' }] }, B2: { questions: [{ type: 'true_false', question: 'Python uses significant whitespace.', answer: true }, { type: 'multiple_choice', question: 'What defines code blocks in Python?', options: ['Curly braces', 'Indentation', 'Semicolons'], correct: 1 }] }, C1: { questions: [{ type: 'fill_blank', question: 'The Zen of Python is documented in PEP ___.', answer: '20' }, { type: 'multiple_choice', question: 'Python was a successor to which language?', options: ['Java', 'ABC', 'C++'], correct: 1 }] } },
    vocabulary: [{ word: 'programming', definition: 'Writing instructions for computers', level: 'A2' }, { word: 'syntax', definition: 'The rules for writing code correctly', level: 'B1' }, { word: 'interpreter', definition: 'A program that executes code line by line', level: 'B2' }],
    wordCounts: { A1: 90, A2: 130, B1: 180, B2: 220, C1: 280 }, readTimes: { A1: 1, A2: 2, B1: 2, B2: 3, C1: 4 } },

  { id: 'ch-python-2', slug: 'variables', wikiTitle: 'Python_Programming/Variables', bookId: 'book-python', title: 'Variables and Data Types', orderIndex: 2,
    content: { A1: 'A variable is like a box. You put things in it. The box has a name.\n\nIn Python, you make a variable like this:\nname = "John"\nage = 25\n\nNow "name" has "John" in it. And "age" has the number 25.\n\nYou can use variables:\nprint(name)\nprint(age)\n\nThis shows "John" and "25" on the screen.', A2: 'Variables store information in your program. Think of them as labeled containers - you give each container a name, and you put data inside.\n\nCreating variables in Python is simple:\nname = "Sarah"\nage = 30\nheight = 1.65\n\nThere are different types of data:\n- Text (strings): "Hello" - always use quotes\n- Whole numbers (integers): 42 - no quotes needed\n- Decimal numbers (floats): 3.14\n\nYou can change what is in a variable:\nage = 30\nage = 31\nNow age equals 31.', B1: 'Variables are fundamental to programming - they allow you to store and manipulate data throughout your program. In Python, creating a variable is straightforward: you simply assign a value to a name using the equals sign.\n\nPython has several built-in data types:\n- Strings (str): text like "Hello World"\n- Integers (int): whole numbers like 100\n- Floats: decimal numbers like 3.14159\n- Booleans (bool): True or False\n\nPython is dynamically typed, meaning you do not need to declare the type of a variable - Python figures it out automatically. You can even change a variable type:\nx = 10 (integer)\nx = "ten" (now a string)\n\nGood variable names are descriptive: user_name, total_price, is_active.', B2: 'Variables in Python serve as references to objects stored in memory. Unlike statically-typed languages like Java or C++, Python employs dynamic typing, determining the type at runtime based on the assigned value.\n\nPython core data types include:\n- Strings (str): Immutable sequences of characters\n- Integers (int): Arbitrary-precision whole numbers\n- Floats (float): IEEE 754 double-precision numbers\n- Booleans (bool): True or False values\n- NoneType: Represents absence of value\n\nType conversion is explicit in Python:\nage_string = "25"\nage_int = int(age_string)  # Convert to integer\n\nUnderstanding mutability is crucial: strings, integers, and tuples are immutable (cannot be changed after creation), while lists and dictionaries are mutable.', C1: 'Python variable model represents a significant departure from traditional compiled languages. Rather than variables being memory locations containing values, Python variables are essentially names bound to objects in memory. This distinction has profound implications for understanding assignment, identity, and mutability.\n\nWhen you write x = 42, Python creates an integer object with value 42 and binds the name "x" to it. The id() function reveals an object memory address, while the "is" operator tests identity rather than equality:\na = [1, 2, 3]\nb = a\nprint(a is b)  # True - same object\nb = [1, 2, 3]\nprint(a is b)  # False - different objects\nprint(a == b)  # True - equal values\n\nPython numeric types demonstrate thoughtful design: integers have arbitrary precision, eliminating overflow concerns. Floats follow IEEE 754 with inherent precision limitations. Type annotations (Python 3.5+) enable optional static type hints for tooling support.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What is a variable?', options: ['A game', 'A box for storing things', 'A computer'], correct: 1 }] }, A2: { questions: [{ type: 'true_false', question: 'Strings use quotes.', answer: true }] }, B1: { questions: [{ type: 'fill_blank', question: 'Python is ___ typed.', answer: 'dynamically' }] }, B2: { questions: [{ type: 'multiple_choice', question: 'Which types are immutable?', options: ['Lists', 'Strings and integers', 'Dictionaries'], correct: 1 }] }, C1: { questions: [{ type: 'fill_blank', question: 'The ___ operator tests identity rather than equality.', answer: 'is' }] } },
    vocabulary: [{ word: 'variable', definition: 'A named storage location for data', level: 'A1' }, { word: 'string', definition: 'Text data enclosed in quotes', level: 'A2' }, { word: 'immutable', definition: 'Cannot be changed after creation', level: 'B2' }],
    wordCounts: { A1: 80, A2: 120, B1: 180, B2: 220, C1: 280 }, readTimes: { A1: 1, A2: 2, B1: 2, B2: 3, C1: 4 } },

  { id: 'ch-python-3', slug: 'control-flow', wikiTitle: 'Python_Programming/Control_Flow', bookId: 'book-python', title: 'Control Flow: If Statements and Loops', orderIndex: 3,
    content: { A1: 'Sometimes you want your program to make choices. We use "if" for this.\n\nage = 18\nif age >= 18:\n    print("You are an adult")\n\nIf age is 18 or more, it prints the message.\n\nYou can also repeat things with loops:\nfor i in range(5):\n    print("Hello")\n\nThis prints "Hello" five times.', A2: 'Programs need to make decisions. The "if" statement checks a condition and runs code only if true.\n\nweather = "sunny"\nif weather == "sunny":\n    print("Go outside!")\nelif weather == "rainy":\n    print("Take an umbrella")\nelse:\n    print("Check the forecast")\n\nLoops repeat code:\n- for loop: repeat a set number of times\n- while loop: repeat while a condition is true\n\nfor name in ["Alice", "Bob", "Charlie"]:\n    print("Hello " + name)', B1: 'Control flow statements determine the order in which code executes. Python provides several constructs for decision-making and iteration.\n\nConditional statements use if, elif, and else:\nscore = 85\nif score >= 90:\n    grade = "A"\nelif score >= 80:\n    grade = "B"\nelif score >= 70:\n    grade = "C"\nelse:\n    grade = "F"\n\nPython offers two loop types:\n1. for loops iterate over sequences:\nfor item in [1, 2, 3, 4, 5]:\n    print(item)\n\n2. while loops continue while a condition holds:\ncount = 0\nwhile count < 5:\n    print(count)\n    count += 1\n\nThe break statement exits a loop early; continue skips to the next iteration.', B2: 'Control flow mechanisms in Python follow the principle of explicit readability. Conditional expressions evaluate truthy and falsy values - empty collections, zero, None, and empty strings are falsy; most other values are truthy.\n\nComprehensions provide concise iteration:\nsquares = [x**2 for x in range(10)]\nevens = [x for x in range(20) if x % 2 == 0]\n\nThe walrus operator (:=) introduced in Python 3.8 enables assignment within expressions:\nwhile (line := input()) != "quit":\n    print(line)\n\nPattern matching (Python 3.10+) adds structural matching:\nmatch command:\n    case "quit":\n        exit()\n    case "help":\n        show_help()\n    case _:\n        print("Unknown command")', C1: 'Python control flow implementation reflects considered language design decisions. The absence of switch statements until Python 3.10 (when match was introduced) exemplified the "one obvious way" philosophy - elif chains were deemed sufficient for most cases.\n\nIterator protocol underlies all Python iteration. The for loop calls iter() on the iterable, then repeatedly calls next() until StopIteration is raised. This protocol enables lazy evaluation through generators:\ndef fibonacci():\n    a, b = 0, 1\n    while True:\n        yield a\n        a, b = b, a + b\n\nContext managers (with statement) ensure resource cleanup through __enter__ and __exit__ methods, representing Python approach to RAII (Resource Acquisition Is Initialization).' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What does "if" do?', options: ['Makes choices', 'Prints text', 'Creates variables'], correct: 0 }] }, A2: { questions: [{ type: 'fill_blank', question: 'To repeat code a specific number of times, use a ___ loop.', answer: 'for' }] }, B1: { questions: [{ type: 'multiple_choice', question: 'Which statement exits a loop early?', options: ['continue', 'break', 'return'], correct: 1 }] }, B2: { questions: [{ type: 'fill_blank', question: 'List ___ provide concise iteration syntax.', answer: 'comprehensions' }] }, C1: { questions: [{ type: 'true_false', question: 'The for loop uses the iterator protocol.', answer: true }] } },
    vocabulary: [{ word: 'loop', definition: 'Code that repeats multiple times', level: 'A2' }, { word: 'iteration', definition: 'One pass through a loop', level: 'B1' }, { word: 'generator', definition: 'A function that yields values lazily', level: 'C1' }],
    wordCounts: { A1: 70, A2: 110, B1: 170, B2: 210, C1: 260 }, readTimes: { A1: 1, A2: 2, B1: 2, B2: 3, C1: 4 } },

  // Human Body chapters
  { id: 'ch-body-1', slug: 'cells', wikiTitle: 'Human_Physiology/The_Cell', bookId: 'book-human-body', title: 'Cells: Building Blocks of Life', orderIndex: 1,
    content: { A1: 'Your body is made of tiny parts called cells. Cells are very, very small. You cannot see them with your eyes. You need a special tool called a microscope.\n\nEvery part of you has cells:\n- Skin cells protect you\n- Blood cells carry oxygen\n- Brain cells help you think\n- Muscle cells help you move\n\nCells need food and water to work. They use food to make energy.', A2: 'Cells are the smallest living parts of your body. They are so tiny that millions of them can fit on the head of a pin! You need a microscope to see them.\n\nYour body has trillions of cells, and different cells have different jobs:\n- Skin cells form a protective barrier\n- Red blood cells carry oxygen throughout your body\n- White blood cells fight disease\n- Nerve cells send electrical messages\n- Muscle cells contract to create movement\n\nEvery cell has parts inside it. The nucleus is like the brain of the cell - it contains instructions (DNA) for what the cell should do.', B1: 'Cells are the fundamental units of life. Every living organism is composed of cells, from single-celled bacteria to complex human beings with approximately 37 trillion cells. The cell theory, established in the 19th century, states that all living things are made of cells, and all cells come from existing cells.\n\nHuman cells share common structures:\n- Plasma membrane: forms the outer boundary, controlling what enters and exits\n- Cytoplasm: gel-like interior where chemical reactions occur\n- Nucleus: houses DNA, the genetic blueprint\n- Mitochondria: generate energy through cellular respiration\n- Ribosomes: manufacture proteins\n\nCell division through mitosis produces identical copies for growth and tissue repair. Different cell types have varying lifespans - some intestinal cells live only days, while nerve cells can last a lifetime.', B2: 'The cell represents the basic structural and functional unit of all living organisms. Robert Hooke first observed cells in 1665 when examining cork under a microscope, though the comprehensive cell theory was not established until the 1830s through the work of Schleiden and Schwann.\n\nHuman cells are eukaryotic, characterized by membrane-bound organelles and a true nucleus. The plasma membrane, composed of a phospholipid bilayer with embedded proteins, regulates molecular transport through selective permeability.\n\nThe nucleus contains chromosomes - structures of DNA wound around histone proteins. Human somatic cells contain 46 chromosomes carrying approximately 20,000 protein-coding genes. Gene expression varies between cell types, explaining cellular differentiation.\n\nMitochondria, often called cellular powerhouses, conduct oxidative phosphorylation to generate ATP. Interestingly, mitochondria possess their own DNA, supporting the endosymbiotic theory of their origin as independent prokaryotes.', C1: 'The cell stands as biology fundamental unit of organization, a concept that revolutionized our understanding of life following the articulation of cell theory by Schleiden, Schwann, and Virchow in the nineteenth century. The human body comprises approximately 37.2 trillion cells, representing some 200 distinct cell types, each exquisitely adapted to specific physiological roles.\n\nThe plasma membrane exemplifies cellular architecture elegant complexity. This phospholipid bilayer, roughly 7-8 nanometers thick, demonstrates selective permeability through various mechanisms: passive diffusion for small nonpolar molecules, facilitated transport via channel and carrier proteins, and active transport requiring ATP expenditure.\n\nIntracellular organization reflects evolutionary history. Mitochondria, bearing their own circular DNA and reproducing via binary fission, provide compelling evidence for the endosymbiotic hypothesis proposed by Lynn Margulis. These organelles conduct oxidative phosphorylation across their cristae, generating the electrochemical gradient that drives ATP synthase.\n\nSignal transduction pathways integrate extracellular cues with cellular responses. Receptor tyrosine kinases, G-protein coupled receptors, and nuclear receptors initiate cascades that ultimately modulate gene expression, metabolism, and cell fate decisions.' },
    exercises: { A1: { questions: [{ type: 'true_false', question: 'You can see cells with your eyes.', answer: false }, { type: 'multiple_choice', question: 'What do blood cells carry?', options: ['Food', 'Oxygen', 'Water'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The ___ is like the brain of the cell.', answer: 'nucleus' }] }, B1: { questions: [{ type: 'multiple_choice', question: 'Which organelle generates energy?', options: ['Nucleus', 'Mitochondria', 'Ribosome'], correct: 1 }] }, B2: { questions: [{ type: 'true_false', question: 'Mitochondria have their own DNA.', answer: true }] }, C1: { questions: [{ type: 'fill_blank', question: 'The ___ hypothesis explains mitochondrial origin.', answer: 'endosymbiotic' }] } },
    vocabulary: [{ word: 'cell', definition: 'The smallest unit of life', level: 'A1' }, { word: 'nucleus', definition: 'The control center of a cell containing DNA', level: 'A2' }, { word: 'mitochondria', definition: 'Organelles that produce energy for the cell', level: 'B1' }],
    wordCounts: { A1: 80, A2: 140, B1: 200, B2: 260, C1: 320 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },

  { id: 'ch-body-2', slug: 'digestive-system', wikiTitle: 'Human_Physiology/Digestion', bookId: 'book-human-body', title: 'The Digestive System', orderIndex: 2,
    content: { A1: 'When you eat food, your body breaks it down. This is called digestion.\n\nFood goes on a journey:\n1. Mouth - you chew food with teeth\n2. Stomach - food mixes with special juices\n3. Intestines - your body takes nutrients from food\n4. The rest leaves your body as waste\n\nDigestion takes about one day. It gives your body energy to move, think, and grow.', A2: 'The digestive system breaks down food into nutrients your body can use. It is like a long tube that starts at your mouth and ends at your bottom.\n\nThe journey of food:\n1. Mouth: Teeth chew food into small pieces. Saliva starts breaking down starches.\n2. Esophagus: A tube that pushes food to your stomach using muscle movements.\n3. Stomach: Strong acids and enzymes break food into a thick liquid.\n4. Small intestine: Most nutrients are absorbed here into your blood.\n5. Large intestine: Water is absorbed. Waste becomes solid.\n\nThe whole process takes 24-72 hours. Your body absorbs proteins, fats, carbohydrates, vitamins, and minerals.', B1: 'The digestive system performs the essential function of converting food into nutrients that cells can use for energy, growth, and repair. This complex system involves mechanical breakdown (chewing, churning) and chemical breakdown (enzymes, acids).\n\nDigestive organs and their functions:\n- Mouth: Mechanical digestion begins with mastication. Salivary amylase initiates carbohydrate breakdown.\n- Esophagus: Peristalsis (muscular contractions) moves food to the stomach.\n- Stomach: Hydrochloric acid (pH 1.5-3.5) denatures proteins. Pepsin breaks peptide bonds.\n- Small intestine: Primary absorption site. Villi and microvilli increase surface area dramatically.\n- Pancreas: Secretes digestive enzymes and bicarbonate to neutralize stomach acid.\n- Liver: Produces bile for fat emulsification.\n- Large intestine: Absorbs water and electrolytes. Houses gut microbiome.\n\nComplete digestion typically takes 24-72 hours, varying with food composition and individual factors.', B2: 'The gastrointestinal tract represents a sophisticated organ system orchestrating the conversion of complex foodstuffs into absorbable nutrients through coordinated mechanical and enzymatic processes.\n\nGastric physiology demonstrates remarkable specialization. Parietal cells secrete hydrochloric acid via the proton pump (H+/K+ ATPase), creating an environment hostile to pathogens while activating pepsinogen to pepsin. Chief cells produce pepsinogen, while mucous cells secrete protective mucus preventing autodigestion.\n\nIntestinal absorption occurs primarily in the small intestine, whose surface area approximates 250 square meters due to structural amplification through circular folds, villi, and microvilli. Enterocytes employ various transport mechanisms: facilitated diffusion for fructose, active transport for glucose and amino acids, and chylomicron formation for lipid absorption.\n\nThe enteric nervous system, comprising roughly 500 million neurons, operates semi-autonomously - earning its designation as the "second brain." This neural network coordinates peristalsis, secretion, and blood flow independently of central nervous system input.', C1: 'The alimentary canal constitutes a remarkably sophisticated interface between organism and environment, executing the transformation of heterogeneous foodstuffs into bioavailable nutrients through an intricate sequence of mechanical disruption and enzymatic hydrolysis.\n\nGastric acid secretion exemplifies elegant physiological regulation. Parietal cells employ the H+/K+-ATPase to generate hydrochloric acid against a concentration gradient exceeding one million-fold. This process is modulated through multiple pathways: histamine (H2 receptors), acetylcholine (muscarinic receptors), and gastrin, with prostaglandins and somatostatin providing inhibitory regulation.\n\nIntestinal absorption mechanisms demonstrate exquisite substrate specificity. The sodium-glucose linked transporter (SGLT1) couples glucose uptake to the electrochemical sodium gradient, while peptide transport occurs via the proton-coupled transporter PepT1. Lipid absorption requires bile salt-mediated micelle formation, with subsequent reassembly of triglycerides within enterocytes for chylomicron secretion.\n\nThe gut microbiome, comprising approximately 100 trillion microorganisms, functions as a virtual organ - fermenting indigestible carbohydrates, synthesizing vitamins (K, B12), modulating immune function, and influencing metabolism through short-chain fatty acid production.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'Where does digestion start?', options: ['Stomach', 'Mouth', 'Intestines'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'Most nutrients are absorbed in the small ___.', answer: 'intestine' }] }, B1: { questions: [{ type: 'true_false', question: 'The stomach has a very acidic environment.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: 'The enteric nervous system is called the second ___.', answer: 'brain' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'Which transporter couples glucose uptake to sodium?', options: ['GLUT1', 'SGLT1', 'PepT1'], correct: 1 }] } },
    vocabulary: [{ word: 'digestion', definition: 'Breaking down food into nutrients', level: 'A1' }, { word: 'enzyme', definition: 'A protein that speeds up chemical reactions', level: 'B1' }, { word: 'peristalsis', definition: 'Muscle contractions that move food through the digestive system', level: 'B2' }],
    wordCounts: { A1: 70, A2: 130, B1: 190, B2: 250, C1: 310 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },

  { id: 'ch-body-3', slug: 'heart', wikiTitle: 'Human_Physiology/Heart', bookId: 'book-human-body', title: 'The Heart and Circulation', orderIndex: 3,
    content: { A1: 'Your heart is in your chest. It pumps blood all day and night. Put your hand on your chest - can you feel it beating?\n\nBlood carries oxygen to every part of your body. Your body needs oxygen to live.\n\nThe heart beats about 100,000 times every day! When you run, it beats faster. When you sleep, it beats slower.\n\nTo keep your heart healthy:\n- Exercise\n- Eat fruits and vegetables\n- Do not smoke', A2: 'The heart is a muscle about the size of your fist. It works like a pump, pushing blood through tubes called blood vessels.\n\nThe heart has four chambers:\n- Two atria (top) receive blood\n- Two ventricles (bottom) pump blood out\n\nBlood flow follows a path:\n1. Blood with carbon dioxide enters the right atrium\n2. Right ventricle pumps it to the lungs\n3. Lungs add oxygen and remove carbon dioxide\n4. Oxygen-rich blood returns to the left atrium\n5. Left ventricle pumps it to the body\n\nYour heart beats about 70 times per minute at rest. Exercise makes your heart stronger!', B1: 'The cardiovascular system comprises the heart and blood vessels, functioning to transport oxygen, nutrients, hormones, and waste products throughout the body. The heart, a four-chambered muscular organ, serves as the central pump.\n\nCardiac anatomy:\n- Right atrium: receives deoxygenated blood from the body via superior and inferior vena cava\n- Right ventricle: pumps blood to lungs via pulmonary artery\n- Left atrium: receives oxygenated blood from lungs via pulmonary veins\n- Left ventricle: pumps blood to body via aorta (strongest chamber)\n\nThe cardiac cycle consists of systole (contraction) and diastole (relaxation). Valves prevent backflow: tricuspid and mitral (atrioventricular), pulmonary and aortic (semilunar).\n\nBlood pressure measures the force of blood against vessel walls, expressed as systolic/diastolic (e.g., 120/80 mmHg). The electrical conduction system, originating at the sinoatrial node, coordinates rhythmic contractions.', B2: 'The cardiovascular system represents a closed circulatory loop with the heart serving as a dual pump - the right side driving pulmonary circulation and the left side powering systemic circulation. Cardiac output, the volume of blood pumped per minute, typically averages 5 liters at rest but can exceed 25 liters during intense exercise.\n\nCardiac electrophysiology governs rhythmic contraction. The sinoatrial (SA) node, the natural pacemaker, generates action potentials at approximately 60-100 beats per minute. Impulses propagate through the atria, pause at the atrioventricular (AV) node (allowing atrial contraction to complete), then travel via the Bundle of His and Purkinje fibers to ventricular muscle.\n\nVascular architecture follows functional requirements. Arteries, with thick elastic walls, withstand high pressure. Arterioles provide resistance and blood pressure regulation. Capillaries, single-cell-thick, enable gas and nutrient exchange. Veins, with valves preventing backflow, return blood under low pressure.\n\nCardiovascular regulation involves neural (sympathetic and parasympathetic), hormonal (epinephrine, angiotensin), and local (nitric oxide) mechanisms.', C1: 'The cardiovascular system exemplifies physiological integration, with cardiac function dynamically modulated to meet metabolic demands ranging from basal requirements to maximal exercise capacity.\n\nMyocardial contractility depends on the Frank-Starling mechanism: increased ventricular filling (preload) stretches cardiac muscle, enhancing cross-bridge formation and stroke volume. Afterload (arterial resistance) inversely affects ejection. These relationships, combined with heart rate, determine cardiac output: CO = HR × SV.\n\nElectromechanical coupling in cardiomyocytes involves calcium-induced calcium release. Depolarization triggers L-type calcium channel opening; this calcium influx prompts sarcoplasmic reticulum calcium release via ryanodine receptors, enabling actin-myosin interaction. The extended plateau phase, distinguishing cardiac from skeletal muscle action potentials, prevents tetanic contraction.\n\nMicrocirculatory exchange follows Starling forces: hydrostatic pressure favors filtration; oncotic pressure promotes reabsorption. Approximately 20 liters of fluid filters daily from capillaries, with 17 liters reabsorbed and 3 liters returning via lymphatics.\n\nBaroreceptor reflexes provide rapid blood pressure homeostasis. Arterial baroreceptors in the carotid sinus and aortic arch signal the medullary cardiovascular center, adjusting sympathetic and parasympathetic output to maintain perfusion pressure.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What does blood carry?', options: ['Food only', 'Oxygen', 'Water only'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The heart has ___ chambers.', answer: 'four' }] }, B1: { questions: [{ type: 'multiple_choice', question: 'Which node is the natural pacemaker?', options: ['AV node', 'SA node', 'Bundle of His'], correct: 1 }] }, B2: { questions: [{ type: 'true_false', question: 'Cardiac output can exceed 25 liters per minute during exercise.', answer: true }] }, C1: { questions: [{ type: 'fill_blank', question: 'The Frank-___ mechanism relates filling to contractility.', answer: 'Starling' }] } },
    vocabulary: [{ word: 'heart', definition: 'The organ that pumps blood', level: 'A1' }, { word: 'circulation', definition: 'The movement of blood through the body', level: 'A2' }, { word: 'cardiac', definition: 'Relating to the heart', level: 'B1' }],
    wordCounts: { A1: 80, A2: 150, B1: 210, B2: 270, C1: 330 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },

  // World History chapters
  { id: 'ch-history-1', slug: 'ancient-civilizations', wikiTitle: 'World_History/Ancient_Civilizations', bookId: 'book-world-history', title: 'Ancient Civilizations', orderIndex: 1,
    content: { A1: 'Long ago, people lived in small groups. They moved from place to place to find food. Then, about 10,000 years ago, people learned to farm. They grew plants for food. They kept animals like sheep and cows.\n\nFarming changed everything. People stayed in one place. They built houses and villages. Villages grew into towns. Towns became cities.\n\nThe first big cities were in Mesopotamia (now Iraq). Egypt also had a great civilization. The Egyptians built the pyramids - huge stone buildings that still exist today!', A2: 'About 10,000 years ago, humans made a huge change called the Agricultural Revolution. Instead of moving around hunting animals and gathering plants, people started farming. They planted wheat, barley, and rice. They domesticated animals like goats and cattle.\n\nFarming let people stay in one place. They built permanent homes. Villages grew into cities. Society became more complex - people had different jobs: farmers, craftsmen, priests, and rulers.\n\nThe first civilizations appeared around 3500 BCE:\n- Mesopotamia (modern Iraq): Invented writing (cuneiform) and built ziggurats\n- Ancient Egypt: Built along the Nile River with pyramids and hieroglyphics\n- Indus Valley (Pakistan): Had advanced cities with water systems\n\nThese civilizations invented many things we still use: writing, wheels, calendars, and mathematics.', B1: 'The transition from nomadic hunter-gatherer societies to settled agricultural communities represents one of humanity most significant transformations. This Agricultural Revolution, occurring independently across multiple regions approximately 10,000 years ago, enabled the development of complex civilizations.\n\nSurplus food production allowed specialization of labor. Not everyone needed to farm - some became craftspeople, priests, soldiers, or administrators. Social hierarchies emerged, and systems of governance developed to manage increasingly complex societies.\n\nMesopotamia, situated between the Tigris and Euphrates rivers, witnessed several influential civilizations. The Sumerians developed cuneiform writing around 3400 BCE, initially for record-keeping. The Code of Hammurabi, created by the Babylonians around 1754 BCE, represents one of the earliest known legal codes - establishing the principle of "an eye for an eye."\n\nAncient Egypt flourished along the Nile, whose annual floods deposited fertile soil. Egyptian civilization lasted over three millennia, developing sophisticated mathematics, medicine, and architecture. The pyramids at Giza, built around 2500 BCE, remain testament to their engineering capabilities.\n\nThe Indus Valley Civilization featured remarkably planned cities with grid-pattern streets and advanced drainage systems, suggesting sophisticated urban planning.', B2: 'The Neolithic Revolution fundamentally transformed human existence, catalyzing the emergence of complex societies we term civilizations. This transition, occurring independently in the Fertile Crescent, China, Mesoamerica, and other regions, enabled unprecedented population density and social complexity.\n\nAgricultural surplus generated profound social consequences. The emergence of non-food-producing specialists - artisans, scribes, priests, warriors - created stratified societies. Property ownership, inheritance systems, and institutionalized inequality became embedded features of civilized life.\n\nMesopotamian contributions to human development proved substantial. Beyond cuneiform writing, Mesopotamians developed the sexagesimal (base-60) numerical system - hence our 60-minute hours and 360-degree circles. The Epic of Gilgamesh, composed around 2100 BCE, represents humanity oldest surviving literary work, exploring themes of friendship, mortality, and the quest for meaning.\n\nEgyptian civilization demonstrated remarkable continuity across three millennia. Their understanding of astronomy enabled development of an accurate 365-day calendar. Mummification practices reflected sophisticated anatomical knowledge. The construction of the Great Pyramid of Giza required mobilizing approximately 100,000 workers and moving 2.3 million stone blocks.\n\nThe Indus Valley Civilization poses fascinating historical puzzles. Despite extensive urban development, its script remains undeciphered. The apparent absence of palatial structures and weapons suggests a society markedly different from its contemporaries.', C1: 'The emergence of complex societies during the fourth millennium BCE represents a pivotal juncture in human history, though the term "civilization" itself carries implicit value judgments warranting critical examination. Archaeological and anthropological evidence increasingly challenges earlier narratives that portrayed this transition as unambiguously progressive.\n\nThe mechanisms underlying state formation remain contested. Traditional theories emphasizing irrigation management (Wittfogel hydraulic hypothesis), population pressure, or warfare have been supplemented by analyses highlighting ideology, trade networks, and ecological factors. The Mesopotamian case demonstrates the interplay of multiple forces: unpredictable Tigris-Euphrates flooding necessitated cooperative water management, while the region position at trade crossroads facilitated resource accumulation.\n\nMesopotamian intellectual achievements extended beyond writing and mathematics. Astronomical observations, initially motivated by astrological concerns, yielded increasingly sophisticated predictive models. Legal traditions evolved from Ur-Nammu code through Hammurabi more comprehensive legislation, establishing principles of proportional justice and documented precedent that influenced subsequent legal systems.\n\nEgyptian civilization longevity derived partly from geographical isolation - surrounding deserts provided natural barriers against invasion. The Nile predictable annual inundation enabled agricultural planning without the uncertainty characterizing Mesopotamian flood patterns. Religious continuity, centered on divine kingship and elaborate mortuary practices, provided ideological coherence across political disruptions.\n\nThe Indus Valley Civilization challenges assumptions about early urban societies. Standardization of weights, measures, and brick dimensions across vast distances implies sophisticated administrative coordination, yet the material record lacks obvious markers of royal authority or military apparatus that characterize contemporary civilizations - suggesting alternative organizational models merit consideration.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What did people learn that changed their lives?', options: ['Swimming', 'Farming', 'Flying'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The rulers of Egypt were called ___.', answer: 'pharaohs' }] }, B1: { questions: [{ type: 'fill_blank', question: 'The Sumerians developed ___ writing.', answer: 'cuneiform' }] }, B2: { questions: [{ type: 'multiple_choice', question: 'What numerical system did Mesopotamians develop?', options: ['Decimal', 'Sexagesimal', 'Binary'], correct: 1 }] }, C1: { questions: [{ type: 'fill_blank', question: 'The Epic of ___ is the oldest literary work.', answer: 'Gilgamesh' }] } },
    vocabulary: [{ word: 'civilization', definition: 'An advanced society with cities and writing', level: 'A2' }, { word: 'agriculture', definition: 'Farming - growing crops and raising animals', level: 'A2' }, { word: 'cuneiform', definition: 'Ancient Mesopotamian writing using wedge-shaped marks', level: 'B1' }],
    wordCounts: { A1: 100, A2: 180, B1: 260, B2: 340, C1: 420 }, readTimes: { A1: 1, A2: 2, B1: 4, B2: 5, C1: 6 } },

  { id: 'ch-history-2', slug: 'medieval-period', wikiTitle: 'World_History/Medieval', bookId: 'book-world-history', title: 'The Medieval Period', orderIndex: 2,
    content: { A1: 'After Rome fell, Europe changed a lot. This time is called the Middle Ages or Medieval period. It lasted about 1,000 years.\n\nLife was hard for most people. They were farmers called peasants. They worked for rich lords who owned the land.\n\nKings and queens ruled countries. Knights were soldiers who wore armor and rode horses. They lived in castles made of stone.\n\nThe Church was very important. Most people were Christian. Monks lived in monasteries and made beautiful books by hand.', A2: 'The Medieval period (about 500-1500 CE) began when the Roman Empire fell. Europe split into many small kingdoms ruled by kings and lords.\n\nThe feudal system organized society:\n- Kings owned all the land\n- Lords managed parts of the kingdom\n- Knights protected the land and fought wars\n- Peasants farmed the land\n\nThe Catholic Church was very powerful. It influenced art, education, and politics. Monasteries preserved ancient knowledge and made copies of important books.\n\nCastles were built for protection. They had thick walls, towers, and moats. Inside, the lord family lived with servants and soldiers.\n\nThe Crusades (1095-1291) were religious wars to capture the Holy Land. They brought Europeans into contact with Islamic culture and new ideas.', B1: 'The Medieval period, spanning roughly 500-1500 CE, emerged from the collapse of the Western Roman Empire. This era, sometimes unfairly labeled the "Dark Ages," witnessed significant developments in governance, religion, and culture.\n\nFeudalism structured medieval society through hierarchical relationships based on land ownership:\n- Monarchs granted land (fiefs) to nobles in exchange for military service\n- Nobles subdivided their holdings, creating vassals bound by oaths of loyalty\n- Peasants (serfs) worked the land, tied to their lord estate\n\nThe Catholic Church served as the dominant institution, providing spiritual guidance, education, and social services. Monasteries preserved classical learning through the copying of manuscripts. The Church wielded significant political influence - popes could excommunicate rulers, releasing their subjects from obedience.\n\nThe Crusades (1095-1291) represented major military campaigns to capture the Holy Land from Muslim control. While militarily unsuccessful in the long term, they facilitated cultural exchange, introducing Europeans to Arabic scholarship, including preserved Greek philosophical works.\n\nThe Black Death (1347-1351) killed approximately one-third of Europe population, triggering profound social and economic changes that contributed to feudalism decline.', B2: 'The medieval period represents a complex era of European history marked by distinctive political, social, and cultural developments that laid groundwork for the modern world. The traditional characterization as "Dark Ages" obscures considerable intellectual and institutional innovation.\n\nFeudal organization created interlocking relationships of obligation and protection. Lords provided land and military protection; vassals provided military service and counsel. This system proved adaptable across Western Europe, though regional variations were significant. Manor economies achieved relative self-sufficiency, with peasants rendering labor services (corvée) and payments in kind.\n\nPapal authority reached its zenith during the High Middle Ages. Pope Gregory VII assertion of supremacy over secular rulers in the Investiture Controversy (1075-1122) established precedents for Church independence. The development of canon law created sophisticated legal frameworks. Universities, originating from cathedral schools, emerged as centers of scholastic inquiry - institutions like Bologna (1088), Paris (1150), and Oxford (1167) would shape European intellectual life for centuries.\n\nThe Crusades facilitated not only military engagement but substantial cultural transmission. Arabic translations of Aristotle, Ptolemy, and Galen entered European intellectual discourse, prompting the scholastic synthesis of reason and faith exemplified by Thomas Aquinas.\n\nThe Black Death demographic catastrophe (perhaps reducing European population by 30-60%) disrupted traditional labor arrangements, ultimately contributing to peasant revolts and serfdom decline.', C1: 'The medieval millennium (c. 500-1500 CE) defies simplistic characterization, encompassing periods of significant institutional development alongside genuine material hardship and cultural transformation.\n\nFeudal arrangements represented pragmatic responses to post-Roman political fragmentation. The devolution of coercive capacity to local lords created overlapping jurisdictions and negotiated sovereignty markedly different from modern state structures. Recent historiography emphasizes how peasant communities exercised agency through customary rights, village courts, and collective resistance, complicating narratives of simple oppression.\n\nThe medieval Church functioned as the primary translocal institution, providing ideological legitimation for social order while operating hospitals, schools, and charitable organizations. Monastic preservation of classical texts (both Christian and pagan) maintained intellectual continuity with antiquity. The emergence of universities institutionalized higher learning, while scholasticism - exemplified by Aquinas synthesis of Aristotelian philosophy with Christian theology - represented sophisticated intellectual achievement.\n\nThe Crusades illustrate the complex interplay of religious motivation, political calculation, and economic interest. While ostensibly directed at recapturing Jerusalem, these expeditions established Latin states in the Levant, facilitated Italian commercial expansion, and channeled aristocratic violence outward. Cultural exchange, often occurring despite religious hostility, transmitted Arabic mathematical, medical, and philosophical knowledge to Latin Christendom.\n\nThe Black Death catastrophic mortality (approximately 30-60% of European population) disrupted demographic patterns for over a century. The resulting labor scarcity empowered surviving peasants to demand better conditions, contributing to serfdom gradual dissolution in Western Europe. The psychological impact - manifested in flagellant movements, Jewish persecution, and intensified preoccupation with death - permeated late medieval culture.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What did peasants do?', options: ['Ruled kingdoms', 'Farmed the land', 'Made wars'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The ___ system organized medieval society.', answer: 'feudal' }] }, B1: { questions: [{ type: 'true_false', question: 'The Black Death killed about one-third of Europe population.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: 'The oldest university in Europe is ___.', answer: 'Bologna' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'What philosophical synthesis did Aquinas achieve?', options: ['Plato and Christianity', 'Aristotle and Christian theology', 'Stoicism and Judaism'], correct: 1 }] } },
    vocabulary: [{ word: 'feudal', definition: 'A system where land is exchanged for service', level: 'B1' }, { word: 'monastery', definition: 'A building where monks live and work', level: 'A2' }, { word: 'scholasticism', definition: 'Medieval method of learning combining faith and reason', level: 'C1' }],
    wordCounts: { A1: 90, A2: 160, B1: 240, B2: 320, C1: 400 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 5, C1: 6 } },

  // Cooking chapters
  { id: 'ch-cook-1', slug: 'kitchen-basics', wikiTitle: 'Cookbook/Basics', bookId: 'book-cooking', title: 'Kitchen Basics', orderIndex: 1,
    content: { A1: 'The kitchen is where we cook food. Let us learn about basic tools.\n\nImportant tools:\n- Knife: cuts food (be careful!)\n- Pot: boils water and makes soup\n- Pan: fries eggs and meat\n- Spoon: stirs food\n- Cutting board: a safe place to cut\n\nSafety rules:\n- Wash hands before cooking\n- Be careful with hot things\n- Keep knives away from children\n- Clean as you cook', A2: 'A well-organized kitchen makes cooking easier. Let us look at essential equipment and safety practices.\n\nBasic cooking equipment:\n- Chef knife: your most important tool for cutting\n- Cutting boards: separate ones for meat and vegetables\n- Pots in different sizes: for boiling, soups, and sauces\n- Frying pans: non-stick pans are good for beginners\n- Measuring cups and spoons: for accurate recipes\n- Mixing bowls: for preparing ingredients\n\nKitchen safety:\n- Always use oven mitts for hot items\n- Turn pot handles inward so they do not get knocked\n- Keep floors dry to prevent slipping\n- Store sharp knives safely\n- Never leave cooking food unattended', B1: 'Kitchen organization and proper equipment form the foundation of successful cooking. Understanding your tools and maintaining food safety practices will improve both efficiency and results.\n\nEssential equipment:\n- Knives: A sharp chef knife (8-10 inch) handles most tasks. A paring knife works for detailed work. Keep knives sharp - dull knives are more dangerous.\n- Cutting boards: Use separate boards for raw meat and vegetables to prevent cross-contamination.\n- Cookware: Heavy-bottomed pans distribute heat evenly. Include a large pot for pasta/stocks, a saucepan for smaller tasks, and skillets in various sizes.\n- Measuring tools: Dry and liquid measuring cups differ - use appropriately for accuracy.\n\nFood safety fundamentals:\n- Temperature danger zone: Bacteria multiply rapidly between 40-140°F (4-60°C)\n- Proper handwashing: 20 seconds with soap, especially after handling raw meat\n- Cross-contamination prevention: Separate raw meats from ready-to-eat foods\n- Safe internal temperatures: Poultry 165°F, ground meat 160°F, whole cuts 145°F', B2: 'Professional kitchen organization follows the mise en place principle - having all ingredients prepared and equipment ready before cooking begins. This approach maximizes efficiency and reduces errors during time-sensitive cooking processes.\n\nKnife skills represent the fundamental technique differentiating competent home cooks from novices. Proper grip (pinch grip on the blade), cutting motion (rock and slice), and knife maintenance (regular honing, occasional sharpening) dramatically improve speed, consistency, and safety.\n\nHeat management proves crucial across cooking methods:\n- Conduction: Direct heat transfer through contact (sautéing, searing)\n- Convection: Heat transfer through fluid movement (boiling, baking)\n- Radiation: Heat transfer via electromagnetic waves (broiling, grilling)\n\nThe Maillard reaction - the chemical process browning foods between 280-330°F - develops complex flavors in seared meats, toasted bread, and roasted vegetables. Achieving this requires sufficient heat and dry surfaces.\n\nFood safety extends beyond basic handling. Understanding HACCP (Hazard Analysis Critical Control Points) principles helps identify risks: receiving, storage, preparation, cooking, and serving all present potential contamination points.', C1: 'Culinary proficiency rests upon comprehensive understanding of heat transfer mechanisms, food chemistry, and systematic organization - principles often intuited by experienced cooks but rarely articulated explicitly.\n\nThe mise en place philosophy extends beyond ingredient preparation to encompass mental readiness and workflow optimization. Professional kitchens employ the brigade system - hierarchical labor division codified by Escoffier - though home cooks benefit from adapting its efficiency principles.\n\nKnife technique represents accumulated craft knowledge. The pinch grip provides optimal control; the guiding hand (using the knuckle as guide) ensures consistent cuts while protecting fingers. Understanding blade geometry - the relationship between edge angle, steel hardness, and intended use - informs appropriate knife selection.\n\nCooking is fundamentally applied chemistry. The Maillard reaction (amino acid-reducing sugar interaction at 280-330°F) and caramelization (sugar pyrolysis above 320°F) generate the complex flavor compounds that distinguish accomplished cooking. Protein denaturation principles determine appropriate cooking temperatures for different meats. Starch gelatinization explains sauce thickening behavior.\n\nFood safety science has advanced considerably from folk practices. Temperature abuse remains the primary pathogenic risk factor. The FDA Food Code specifies precise requirements: cold holding below 41°F, hot holding above 135°F, and appropriate cooking temperatures for various proteins. Understanding microbial growth curves and thermal death time enables intelligent risk management.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What tool cuts food?', options: ['Spoon', 'Knife', 'Pot'], correct: 1 }] }, A2: { questions: [{ type: 'true_false', question: 'You should use separate cutting boards for meat and vegetables.', answer: true }] }, B1: { questions: [{ type: 'fill_blank', question: 'Bacteria multiply rapidly between 40-140°F, called the temperature ___ zone.', answer: 'danger' }] }, B2: { questions: [{ type: 'fill_blank', question: 'The ___ reaction causes browning in seared foods.', answer: 'Maillard' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'At what temperature does the Maillard reaction occur?', options: ['100-150°F', '200-250°F', '280-330°F'], correct: 2 }] } },
    vocabulary: [{ word: 'ingredients', definition: 'Foods used to make a dish', level: 'A1' }, { word: 'sauté', definition: 'To cook quickly in a small amount of fat', level: 'B1' }, { word: 'mise en place', definition: 'Having everything in place before cooking', level: 'B2' }],
    wordCounts: { A1: 80, A2: 140, B1: 220, B2: 300, C1: 380 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },

  // Astronomy chapters
  { id: 'ch-astro-1', slug: 'solar-system', wikiTitle: 'Astronomy/Solar_System', bookId: 'book-astronomy', title: 'Our Solar System', orderIndex: 1,
    content: { A1: 'We live on Earth. Earth is a planet. It goes around the Sun.\n\nThe Sun is a star. It is very hot and gives us light and warmth. Without the Sun, Earth would be dark and cold.\n\nThere are 8 planets in our solar system:\n- Mercury (closest to Sun)\n- Venus\n- Earth (our home!)\n- Mars (the red planet)\n- Jupiter (the biggest)\n- Saturn (has beautiful rings)\n- Uranus\n- Neptune (farthest from Sun)\n\nThe Moon goes around Earth. We can see it at night.', A2: 'Our solar system contains the Sun and everything that travels around it. The Sun is a star - a huge ball of burning gas that provides light and heat to all the planets.\n\nThe eight planets divide into two groups:\n\nRocky planets (inner):\n- Mercury: smallest, no atmosphere\n- Venus: hottest, thick clouds\n- Earth: only planet with liquid water on surface\n- Mars: has the largest volcano (Olympus Mons)\n\nGas giants (outer):\n- Jupiter: largest planet, famous red spot is a storm\n- Saturn: beautiful ring system made of ice and rock\n- Uranus: rotates on its side\n- Neptune: has the strongest winds\n\nOther objects include:\n- Dwarf planets like Pluto\n- Moons orbiting planets\n- Asteroids (rocky) and comets (icy)', B1: 'Our solar system formed approximately 4.6 billion years ago from a collapsing cloud of gas and dust. The Sun contains 99.86% of the solar system total mass, with Jupiter accounting for most of the remainder.\n\nPlanetary classification:\n\nTerrestrial planets (Mercury, Venus, Earth, Mars):\n- Rocky composition with iron cores\n- Solid surfaces with potential for geological activity\n- Relatively thin or absent atmospheres (except Venus)\n- Located in the inner solar system\n\nGiant planets:\n- Gas giants (Jupiter, Saturn): Primarily hydrogen and helium\n- Ice giants (Uranus, Neptune): Significant water, ammonia, and methane\n- No solid surfaces - atmospheric pressure increases with depth\n- Extensive moon systems\n\nThe asteroid belt between Mars and Jupiter contains millions of rocky bodies - remnants from solar system formation that Jupiter gravity prevented from forming a planet.\n\nThe Kuiper Belt beyond Neptune harbors dwarf planets including Pluto and Eris, along with countless icy bodies that occasionally become comets when gravitationally perturbed toward the inner solar system.', B2: 'The solar system architecture reflects formation processes occurring within the protoplanetary disk surrounding the young Sun. Gravitational accretion concentrated heavier elements in the warmer inner regions while lighter volatiles condensed beyond the frost line, explaining the rocky/gaseous planetary dichotomy.\n\nSolar structure and energy production:\nThe Sun, a G-type main sequence star, generates energy through hydrogen fusion in its core, where temperatures reach 15 million Kelvin. Energy transport transitions from radiative diffusion in inner regions to convection near the surface. The 11-year solar cycle reflects magnetic field variations affecting sunspot frequency and solar activity.\n\nPlanetary atmospheres demonstrate diverse evolutionary paths. Venus experienced runaway greenhouse warming despite similar size to Earth. Mars lost most of its atmosphere to solar wind stripping, lacking a protective magnetic field. Earth unique habitability depends on liquid water, moderate greenhouse effect, and magnetospheric protection.\n\nResonance phenomena structure the solar system. Jupiter Trojan asteroids occupy stable Lagrange points. Kirkwood gaps in the asteroid belt correspond to orbital resonances with Jupiter. Neptune 3:2 resonance with Pluto exemplifies the orbital dynamics governing trans-Neptunian objects.\n\nPlanetary migration during early solar system history may explain observations that challenge in-situ formation models, including hot Jupiters observed in other stellar systems.', C1: 'The solar system exemplifies planetary system formation principles while presenting unique features that challenge theoretical models. Current understanding synthesizes observational data, laboratory analysis of meteorites, and computational simulations to reconstruct the sequence from molecular cloud collapse to contemporary architecture.\n\nNebular hypothesis refinements address persistent questions. The Nice model proposes that giant planets underwent significant migration after formation, with Jupiter inward movement and subsequent outward migration (the "Grand Tack") sculpting the inner solar system. Neptune outward migration scattered the primordial Kuiper Belt, potentially capturing Pluto and other resonant objects.\n\nSolar physics encompasses magnetohydrodynamics, nuclear fusion, and helioseismology. The solar dynamo, generating the magnetic field through differential rotation and convection, remains incompletely understood. Corona heating - why temperatures exceed one million Kelvin when the photosphere measures only 5,500K - presents an unresolved problem. Solar wind, the continuous outflow of charged particles, creates the heliosphere extending far beyond planetary orbits.\n\nPlanetary atmospheric evolution reflects complex interactions between initial composition, stellar radiation, magnetic field presence, and geological activity. Venus supercritical CO2 atmosphere, Earth nitrogen-oxygen disequilibrium (maintained by biology), and Mars episodic atmospheric loss illustrate divergent trajectories from potentially similar origins.\n\nAstrobiology implications derive from understanding habitable zone boundaries, atmospheric biomarkers, and subsurface habitability possibilities in icy moon oceans (Europa, Enceladus). The solar system provides our only accessible laboratory for these investigations.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'Which planet is closest to the Sun?', options: ['Earth', 'Mercury', 'Mars'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'Saturn has beautiful ___ made of ice and rock.', answer: 'rings' }] }, B1: { questions: [{ type: 'true_false', question: 'The Sun contains over 99% of the solar system mass.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: 'Jupiter Trojan asteroids occupy stable ___ points.', answer: 'Lagrange' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'What model proposes giant planet migration?', options: ['Copenhagen model', 'Nice model', 'Standard model'], correct: 1 }] } },
    vocabulary: [{ word: 'planet', definition: 'A large body orbiting a star', level: 'A1' }, { word: 'orbit', definition: 'The path one object takes around another', level: 'A2' }, { word: 'protoplanetary', definition: 'Relating to the disk of material forming planets', level: 'C1' }],
    wordCounts: { A1: 100, A2: 170, B1: 250, B2: 330, C1: 400 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 5, C1: 6 } },

  // Web Development chapters
  { id: 'ch-web-1', slug: 'html-basics', wikiTitle: 'Web_Development/HTML', bookId: 'book-web-dev', title: 'HTML: Building Web Pages', orderIndex: 1,
    content: { A1: 'Every website uses HTML. HTML tells the browser what to show.\n\nHTML uses tags. Tags look like this: <tag>\n\nImportant tags:\n- <h1> makes a big title\n- <p> makes a paragraph of text\n- <img> shows a picture\n- <a> makes a link to another page\n\nExample:\n<h1>My Website</h1>\n<p>Welcome to my page!</p>\n\nThis shows a title and some text.', A2: 'HTML (HyperText Markup Language) is the foundation of all web pages. Browsers read HTML and display the content you see.\n\nHTML structure:\n- Tags come in pairs: <p>text</p>\n- The opening tag starts, closing tag (with /) ends\n- Tags can have attributes: <img src="photo.jpg">\n\nBasic page structure:\n<html>\n  <head>\n    <title>Page Title</title>\n  </head>\n  <body>\n    Content goes here\n  </body>\n</html>\n\nCommon tags:\n- <h1> to <h6>: headings (h1 biggest)\n- <p>: paragraphs\n- <ul> and <li>: bullet lists\n- <a href="url">: links\n- <img src="file">: images\n- <div>: container for grouping', B1: 'HTML provides the semantic structure of web pages, defining content meaning rather than appearance. Modern HTML5 emphasizes semantic elements that describe their content purpose.\n\nDocument structure:\n<!DOCTYPE html> declares HTML5\n<html lang="en"> specifies language\n<head> contains metadata, not displayed\n<body> contains visible content\n\nSemantic elements (HTML5):\n- <header>: introductory content\n- <nav>: navigation links\n- <main>: primary page content\n- <article>: self-contained content\n- <section>: thematic grouping\n- <aside>: tangentially related content\n- <footer>: concluding content\n\nForms collect user input:\n<form action="/submit" method="POST">\n  <label for="name">Name:</label>\n  <input type="text" id="name" name="name">\n  <button type="submit">Send</button>\n</form>\n\nAccessibility considerations include alt text for images, proper heading hierarchy, and ARIA attributes for screen readers.', B2: 'HTML5 represents a significant evolution in web markup, introducing semantic elements, native multimedia support, and APIs enabling complex web applications without plugins.\n\nThe Document Object Model (DOM) provides programmatic access to HTML structure. JavaScript interacts with elements through methods like getElementById, querySelector, and the comprehensive DOM API.\n\nModern HTML practices:\n- Semantic markup improves accessibility and SEO\n- Progressive enhancement ensures basic functionality without JavaScript\n- Responsive images using srcset and sizes attributes\n- Custom data attributes (data-*) store element-specific information\n\nForm validation:\nHTML5 introduces native validation attributes:\n- required: mandatory field\n- pattern: regex matching\n- min/max: numeric constraints\n- type-specific validation (email, url, tel)\n\nMultimedia embedding:\n<video controls>\n  <source src="movie.mp4" type="video/mp4">\n  <source src="movie.webm" type="video/webm">\n</video>\n\nCanvas and SVG enable graphics:\n- <canvas>: bitmap graphics via JavaScript\n- <svg>: scalable vector graphics\n\nWeb Components extend HTML with custom elements, encapsulating functionality through shadow DOM.', C1: 'HTML has evolved from a simple document markup language to the semantic foundation of the web platform, with HTML5 codifying practices developed during the WHATWG period and establishing APIs that enable sophisticated client-side applications.\n\nThe HTML specification navigates competing concerns: backward compatibility with legacy content, forward progress toward semantic precision, and practical implementability across browser engines. This tension produces occasional inconsistencies but generally yields pragmatic solutions.\n\nAccessibility implementation requires understanding WCAG guidelines and ARIA (Accessible Rich Internet Applications) specification. While semantic HTML provides inherent accessibility, dynamic content and custom widgets require explicit ARIA roles, states, and properties. The accessibility tree, parallel to the DOM, represents content for assistive technologies.\n\nPerformance considerations permeate markup decisions:\n- Critical rendering path optimization: minimize render-blocking resources\n- Resource hints (preload, prefetch, preconnect) prioritize asset loading\n- Lazy loading (loading="lazy") defers off-screen images\n- Content Security Policy headers mitigate XSS vulnerabilities\n\nStructured data (Schema.org vocabulary, JSON-LD format) enables machine-readable content, enhancing search engine understanding and enabling rich results. The relationship between HTML semantics and structured data represents evolving best practices for content discoverability.\n\nEmerging specifications like Web Components (Custom Elements, Shadow DOM, HTML Templates) enable component-based architecture at the platform level, though framework adoption patterns vary across the industry.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What makes a big title?', options: ['<p>', '<h1>', '<a>'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'Content visible on the page goes in the <___> tag.', answer: 'body' }] }, B1: { questions: [{ type: 'true_false', question: 'HTML5 introduced semantic elements like header and footer.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: 'The ___ provides programmatic access to HTML structure.', answer: 'DOM' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'What enables machine-readable structured data?', options: ['ARIA', 'Schema.org', 'WCAG'], correct: 1 }] } },
    vocabulary: [{ word: 'tag', definition: 'HTML code that defines elements', level: 'A1' }, { word: 'semantic', definition: 'Relating to meaning in language or code', level: 'B1' }, { word: 'accessibility', definition: 'Making content usable by people with disabilities', level: 'B2' }],
    wordCounts: { A1: 70, A2: 140, B1: 220, B2: 300, C1: 380 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },

  // Economics chapters
  { id: 'ch-econ-1', slug: 'supply-demand', wikiTitle: 'Economics/Supply_Demand', bookId: 'book-economics', title: 'Supply and Demand', orderIndex: 1,
    content: { A1: 'When you buy something, you pay money. The price depends on two things: supply and demand.\n\nDemand: how much people want something\n- Many people want it = high demand\n- Few people want it = low demand\n\nSupply: how much of something exists\n- A lot available = high supply\n- Not much available = low supply\n\nHigh demand + low supply = high price\nLow demand + high supply = low price\n\nExample: Ice cream costs more in summer (high demand).', A2: 'Supply and demand are the basic forces that set prices in a market economy.\n\nDemand is how much people want to buy:\n- When prices are low, people buy more\n- When prices are high, people buy less\n- This is the Law of Demand\n\nSupply is how much sellers offer:\n- When prices are high, sellers produce more\n- When prices are low, sellers produce less\n- This is the Law of Supply\n\nThe equilibrium price is where supply meets demand. At this price, the amount people want to buy equals the amount sellers want to sell.\n\nThings that change demand: income, tastes, prices of related goods\nThings that change supply: production costs, technology, number of sellers', B1: 'Supply and demand analysis forms the foundation of microeconomic theory, explaining price determination and resource allocation in market economies.\n\nThe demand curve illustrates the inverse relationship between price and quantity demanded, holding other factors constant (ceteris paribus). Demand shifters include:\n- Consumer income (normal vs. inferior goods)\n- Prices of substitutes and complements\n- Consumer preferences and expectations\n- Population and demographics\n\nThe supply curve shows the positive relationship between price and quantity supplied. Supply shifters include:\n- Input costs (labor, materials, energy)\n- Technology and productivity\n- Government policies (taxes, subsidies)\n- Producer expectations\n\nMarket equilibrium occurs where supply and demand curves intersect. At prices above equilibrium, surplus results as quantity supplied exceeds quantity demanded. Below equilibrium, shortage occurs.\n\nElasticity measures responsiveness to price changes:\n- Elastic demand: percentage change in quantity exceeds percentage change in price\n- Inelastic demand: quantity changes proportionally less than price\n- Factors affecting elasticity: availability of substitutes, necessity vs. luxury, time horizon', B2: 'Supply and demand analysis, while seemingly elementary, provides powerful predictive frameworks for market behavior. The mathematical formalization enables precise analysis of market responses to various shocks.\n\nDemand functions: Qd = f(P, Y, Ps, Pc, T, E)\nWhere P=price, Y=income, Ps=substitute prices, Pc=complement prices, T=tastes, E=expectations\n\nPrice elasticity of demand: Ed = (%ΔQd)/(%ΔP)\nInelastic (|Ed|<1): total revenue increases with price\nElastic (|Ed|>1): total revenue decreases with price\nUnit elastic (|Ed|=1): total revenue unchanged\n\nCross-price elasticity identifies relationships:\n- Positive: substitutes (butter and margarine)\n- Negative: complements (printers and ink)\n\nIncome elasticity classifies goods:\n- Normal goods (positive): demand rises with income\n- Inferior goods (negative): demand falls with income\n- Luxury goods: income elasticity >1\n\nMarket equilibrium represents a Nash equilibrium where no agent can improve their position through unilateral action. Government interventions (price floors, ceilings, taxes) create deadweight loss by preventing market-clearing prices.\n\nGeneral equilibrium extends partial analysis to simultaneously clear all markets, though the mathematical complexity requires simplifying assumptions.', C1: 'Supply and demand theory represents the neoclassical synthesis approach to price theory, though contemporary economics recognizes significant limitations in idealized market models and explores behavioral, institutional, and complexity-theoretic alternatives.\n\nThe partial equilibrium framework of Marshall abstracts from cross-market effects, enabling tractable analysis while sacrificing generality. General equilibrium theory (Arrow-Debreu) demonstrates existence and Pareto efficiency of competitive equilibrium under restrictive conditions: perfect competition, complete markets, no externalities, and rational optimizing agents.\n\nWelfare analysis relies on consumer and producer surplus concepts. Market efficiency criterion holds that competitive equilibrium maximizes total surplus. However, this utilitarian aggregation faces distribution concerns - willingness to pay reflects ability to pay, potentially justifying interventions despite efficiency costs.\n\nMarket failures motivate intervention:\n- Externalities: divergence between private and social costs/benefits\n- Public goods: non-rivalrous, non-excludable goods undersupplied by markets\n- Information asymmetries: adverse selection and moral hazard\n- Market power: monopolistic distortions\n\nBehavioral economics challenges the rational agent assumption underlying demand theory. Bounded rationality, framing effects, loss aversion, and time inconsistency generate systematic deviations from predicted behavior. Nudge policies exploit these insights for welfare enhancement.\n\nInstitutional economics emphasizes that markets operate within social structures - property rights, contract enforcement, and social norms profoundly affect outcomes. Transaction cost economics (Coase, Williamson) explains organizational boundaries and governance structures through efficiency considerations.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What happens when many people want something?', options: ['Price goes down', 'Price goes up', 'Price stays same'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The ___ price is where supply meets demand.', answer: 'equilibrium' }] }, B1: { questions: [{ type: 'true_false', question: 'Elastic demand means quantity changes more than price.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: 'Price ceilings and floors create ___ loss.', answer: 'deadweight' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'What theory demonstrates competitive equilibrium existence?', options: ['Marshall theory', 'Arrow-Debreu', 'Keynesian theory'], correct: 1 }] } },
    vocabulary: [{ word: 'price', definition: 'The amount of money to buy something', level: 'A1' }, { word: 'equilibrium', definition: 'A balanced state where forces are equal', level: 'B1' }, { word: 'elasticity', definition: 'How much quantity responds to price changes', level: 'B2' }],
    wordCounts: { A1: 80, A2: 150, B1: 230, B2: 310, C1: 390 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 6 } },

  // More Python chapters
  { id: 'ch-python-4', slug: 'functions', wikiTitle: 'Python_Programming/Functions', bookId: 'book-python', title: 'Functions', orderIndex: 4,
    content: { A1: 'A function is a group of code that does a job. You write it once, use it many times.\n\nTo make a function:\ndef say_hello():\n    print("Hello!")\n\nTo use it:\nsay_hello()\n\nFunctions can take information:\ndef greet(name):\n    print("Hello " + name)\n\ngreet("Maria")  # prints "Hello Maria"', A2: 'Functions organize code into reusable blocks. Instead of writing the same code again and again, write a function once and call it when needed.\n\nCreating functions:\ndef function_name(parameters):\n    # code here\n    return result\n\nExample:\ndef add_numbers(a, b):\n    result = a + b\n    return result\n\ntotal = add_numbers(5, 3)  # total = 8\n\nKey points:\n- def starts a function definition\n- Parameters receive input values\n- return sends a value back\n- Indentation defines the function body\n\nBuilt-in functions:\n- print() displays output\n- len() returns length\n- input() gets user input', B1: 'Functions encapsulate logic, promoting code reuse, readability, and maintainability. Python supports multiple parameter types and return values.\n\nParameter types:\n- Positional: matched by position (func(1, 2))\n- Keyword: matched by name (func(x=1, y=2))\n- Default: has fallback value (def func(x=10))\n- *args: accepts variable positional arguments\n- **kwargs: accepts variable keyword arguments\n\ndef example(required, optional=10, *args, **kwargs):\n    print(required, optional, args, kwargs)\n\nReturn values:\n- return sends value(s) back to caller\n- return without value returns None\n- Multiple values return as tuple\n\nScope:\n- Local variables exist only within function\n- Global variables accessible everywhere (use sparingly)\n- LEGB rule: Local, Enclosing, Global, Built-in\n\nDocstrings document functions:\ndef calculate_area(radius):\n    """Calculate circle area given radius."""\n    return 3.14159 * radius ** 2', B2: 'Python functions are first-class objects - they can be assigned to variables, passed as arguments, and returned from other functions, enabling functional programming patterns.\n\nLambda functions provide anonymous, single-expression functions:\nsquare = lambda x: x ** 2\nsorted(items, key=lambda x: x[1])\n\nHigher-order functions operate on other functions:\n- map(func, iterable): applies function to all elements\n- filter(func, iterable): keeps elements where func returns True\n- reduce(func, iterable): cumulative application\n\nDecorators modify function behavior:\n@decorator\ndef function():\n    pass\n# equivalent to: function = decorator(function)\n\nClosure captures enclosing scope variables:\ndef make_multiplier(n):\n    def multiplier(x):\n        return x * n\n    return multiplier\n\nPartial function application (functools.partial) pre-fills arguments:\nfrom functools import partial\nadd_five = partial(add, 5)\n\nRecursion (function calling itself) requires base case to prevent infinite loops.', C1: 'Python function implementation reveals interpreter internals and enables advanced patterns including metaprogramming and functional programming idioms.\n\nFunction objects possess attributes: __name__, __doc__, __annotations__, __defaults__, __code__, __globals__. The __code__ object contains bytecode, variable names, and compilation information, enabling introspection and dynamic modification.\n\nDecorator patterns extend beyond simple wrappers:\n@functools.wraps preserves function metadata\nClass-based decorators maintain state\nDecorator factories accept parameters:\n\ndef repeat(n):\n    def decorator(func):\n        @functools.wraps(func)\n        def wrapper(*args, **kwargs):\n            for _ in range(n):\n                result = func(*args, **kwargs)\n            return result\n        return wrapper\n    return decorator\n\nGenerator functions (yield keyword) create iterators lazily, enabling memory-efficient processing of large datasets. Coroutines (async/await) extend this for asynchronous programming.\n\nThe descriptor protocol (__get__, __set__, __delete__) underlies property behavior and enables framework features like ORMs. Understanding method resolution order (MRO) and the super() function clarifies inheritance behavior.' },
    exercises: { A1: { questions: [{ type: 'multiple_choice', question: 'What word starts a function?', options: ['function', 'def', 'start'], correct: 1 }] }, A2: { questions: [{ type: 'fill_blank', question: 'The ___ keyword sends a value back from a function.', answer: 'return' }] }, B1: { questions: [{ type: 'true_false', question: '*args accepts variable positional arguments.', answer: true }] }, B2: { questions: [{ type: 'fill_blank', question: '___ functions are anonymous single-expression functions.', answer: 'Lambda' }] }, C1: { questions: [{ type: 'multiple_choice', question: 'What attribute contains function bytecode?', options: ['__doc__', '__code__', '__name__'], correct: 1 }] } },
    vocabulary: [{ word: 'function', definition: 'A reusable block of code', level: 'A1' }, { word: 'parameter', definition: 'A variable in a function definition', level: 'A2' }, { word: 'decorator', definition: 'A function that modifies another function', level: 'B2' }],
    wordCounts: { A1: 70, A2: 130, B1: 200, B2: 280, C1: 360 }, readTimes: { A1: 1, A2: 2, B1: 3, B2: 4, C1: 5 } },
];

async function seed() {
  console.log('Seeding books and chapters...');

  // Delete existing data
  const { error: delChapErr } = await supabase.from('Chapter').delete().neq('id', '');
  if (delChapErr) console.error('Delete chapters error:', delChapErr);

  const { error: delBookErr } = await supabase.from('Book').delete().neq('id', '');
  if (delBookErr) console.error('Delete books error:', delBookErr);

  // Insert books
  const { error: bookError } = await supabase.from('Book').insert(
    books.map(b => ({ ...b, createdAt: new Date().toISOString(), updatedAt: new Date().toISOString() }))
  );
  if (bookError) { console.error('Book insert error:', bookError); return; }
  console.log(`Inserted ${books.length} books`);

  // Insert chapters
  const { error: chapterError } = await supabase.from('Chapter').insert(
    chapters.map(c => ({ ...c, createdAt: new Date().toISOString(), updatedAt: new Date().toISOString() }))
  );
  if (chapterError) { console.error('Chapter insert error:', chapterError); return; }
  console.log(`Inserted ${chapters.length} chapters`);

  console.log('Done! Seeded successfully.');
}

seed();
